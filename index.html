<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Name</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
    /* none */
    </style>
</head>
<body class="antialiased selection:bg-white selection:text-black">

    <!-- Custom Cursor -->
    <div id="cursor"></div>

    <!-- Loader -->
    <div id="loader">
        <div class="loader-line"></div>
    </div>

    <!-- 3D Background -->
    <div id="canvas-container"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full px-6 py-6 md:px-12 flex justify-between items-center z-50 backdrop-blur-md bg-black/20 border-b border-white/5">
        <a href="#" class="text-xl font-bold tracking-tighter magnetic-btn hover-trigger relative group">
            JD.
            <span class="absolute -bottom-1 left-0 w-0 h-[1px] bg-white transition-all duration-300 group-hover:w-full"></span>
        </a>
        <div class="hidden md:flex space-x-8 text-xs font-medium tracking-widest uppercase text-gray-400">
            <a href="#work" class="hover:text-white transition-colors hover-trigger">Work</a>
            <a href="#services" class="hover:text-white transition-colors hover-trigger">Services</a>
            <!-- AI Group -->
            <div class="flex space-x-4 pl-4 border-l border-gray-800">
                <a href="#neural" class="hover:text-purple-400 transition-colors hover-trigger">AI Oracle</a>
                <a href="#vision" class="hover:text-blue-400 transition-colors hover-trigger">Vision</a>
            </div>
            <a href="#contact" class="hover:text-white transition-colors hover-trigger ml-4">Contact</a>
        </div>
        <button class="md:hidden text-white hover-trigger">
            <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
        </button>
    </nav>

    <!-- Main Content Wrapper -->
    <main class="relative z-10">
        
        <!-- Hero Section -->
        <section class="min-h-screen flex flex-col justify-center px-6 md:px-20 pt-20 relative">
            <div class="max-w-6xl z-20">
                <div class="flex items-center gap-3 mb-6 fade-in-up" style="animation-delay: 0.1s;">
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <p class="text-gray-400 tracking-widest uppercase text-xs font-mono">Available for new projects</p>
                </div>
                
                <h1 class="text-6xl md:text-9xl font-bold leading-[0.9] mb-8 tracking-tight">
                    <div class="overflow-hidden"><span class="block transform translate-y-full reveal-text">Name</span></div>
                    <div class="overflow-hidden"><span class="block transform translate-y-full reveal-text" style="transition-delay: 0.1s;">Zheng</span></div>
                    <div class="overflow-hidden"><span class="block transform translate-y-full reveal-text text-stroke opacity-60" style="transition-delay: 0.2s;">ARCHITECT</span></div>
                </h1>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 mt-12">
                    <p class="text-gray-400 text-lg leading-relaxed fade-in-up opacity-0 max-w-md" style="animation-delay: 1s; animation-fill-mode: forwards; animation-name: fadeInUp;">
                        I build high-performance WebGL experiences and brutalist interfaces. Bridging the gap between design, code, and artificial intelligence.
                    </p>
                    
                    <div class="flex gap-4 items-start fade-in-up opacity-0" style="animation-delay: 1.2s; animation-fill-mode: forwards; animation-name: fadeInUp;">
                        <a href="#work" class="px-8 py-4 bg-white text-black font-bold text-sm tracking-widest uppercase hover:bg-gray-200 transition-colors hover-trigger">
                            View Selected Work
                        </a>
                        <a href="#uplink" class="px-8 py-4 border border-gray-700 text-white font-bold text-sm tracking-widest uppercase hover:bg-white/5 transition-colors hover-trigger">
                            Talk to AI
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="absolute bottom-10 left-6 md:left-auto md:right-20 flex flex-col items-end space-y-2 text-[10px] text-gray-500 font-mono z-20">
                <span>SCROLL TO EXPLORE</span>
                <div class="h-12 w-[1px] bg-gray-800 relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-1/2 bg-white animate-scrolldown"></div>
                </div>
            </div>
        </section>

        <!-- Services Section (New) -->
        <section id="services" class="py-24 px-6 md:px-20 border-t border-gray-900">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                <div>
                    <h2 class="text-3xl font-bold mb-6">Capabilities</h2>
                    <p class="text-gray-500 text-sm leading-relaxed max-w-xs">
                        Comprehensive digital solutions tailored for brands that want to stand out in the noise.
                    </p>
                </div>
                <div class="md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-8">
                    <div class="border-l border-gray-800 pl-6 hover:border-white transition-colors duration-300 group">
                        <h3 class="text-xl font-bold mb-2 group-hover:text-white text-gray-300">Creative Development</h3>
                        <p class="text-gray-500 text-sm">WebGL, Three.js, React, Framer Motion. Building immersive websites that perform.</p>
                    </div>
                    <div class="border-l border-gray-800 pl-6 hover:border-white transition-colors duration-300 group">
                        <h3 class="text-xl font-bold mb-2 group-hover:text-white text-gray-300">UI/UX Design</h3>
                        <p class="text-gray-500 text-sm">Brutalist aesthetics, micro-interactions, and user-centric wireframing.</p>
                    </div>
                    <div class="border-l border-gray-800 pl-6 hover:border-white transition-colors duration-300 group">
                        <h3 class="text-xl font-bold mb-2 group-hover:text-white text-gray-300">AI Integration</h3>
                        <p class="text-gray-500 text-sm">LLM Implementation, RAG systems, and generative art workflows using Gemini.</p>
                    </div>
                    <div class="border-l border-gray-800 pl-6 hover:border-white transition-colors duration-300 group">
                        <h3 class="text-xl font-bold mb-2 group-hover:text-white text-gray-300">Technical Strategy</h3>
                        <p class="text-gray-500 text-sm">Performance optimization, SEO, and scalable architecture planning.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Work Section -->
        <section id="work" class="py-32 px-6 md:px-20 bg-[#080808]">
            <div class="flex flex-col md:flex-row justify-between items-end mb-20 pb-8 border-b border-gray-800">
                <div>
                    <span class="text-xs font-mono text-gray-500 uppercase mb-2 block">Selected Projects</span>
                    <h2 class="text-4xl md:text-6xl font-bold">Recent Work</h2>
                </div>
                <a href="#" class="hidden md:block text-sm font-mono text-gray-400 hover:text-white hover-trigger">VIEW ALL ARCHIVE -></a>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-12 md:gap-24">
                <!-- Project 1 -->
                <div class="group cursor-pointer hover-trigger">
                    <div class="aspect-[4/3] bg-gray-900 overflow-hidden relative mb-6 border border-white/5 transition-all duration-500 group-hover:border-white/20">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div class="w-32 h-32 border border-gray-700 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-500">
                                <div class="w-2 h-2 bg-white rounded-full"></div>
                            </div>
                        </div>
                        <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <span class="border border-white px-6 py-3 text-xs tracking-[0.2em] uppercase font-bold hover:bg-white hover:text-black transition-colors">View Case</span>
                        </div>
                    </div>
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="text-2xl font-bold mb-1">Nebula Core</h3>
                            <p class="text-gray-500 text-xs font-mono uppercase">WebGL / Data Viz</p>
                        </div>
                        <span class="text-gray-600 text-xs font-mono">2024</span>
                    </div>
                </div>

                <!-- Project 2 -->
                <div class="group cursor-pointer hover-trigger md:mt-24">
                    <div class="aspect-[4/3] bg-gray-900 overflow-hidden relative mb-6 border border-white/5 transition-all duration-500 group-hover:border-white/20">
                        <div class="absolute inset-0 flex items-center justify-center">
                             <div class="w-20 h-20 border border-white/20 transform rotate-45 group-hover:rotate-90 transition-transform duration-700"></div>
                        </div>
                        <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center">
                            <span class="border border-white px-6 py-3 text-xs tracking-[0.2em] uppercase font-bold hover:bg-white hover:text-black transition-colors">View Case</span>
                        </div>
                    </div>
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="text-2xl font-bold mb-1">Silent Ventures</h3>
                            <p class="text-gray-500 text-xs font-mono uppercase">Branding / Identity</p>
                        </div>
                        <span class="text-gray-600 text-xs font-mono">2023</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Feature Divider -->
        <div class="py-8 bg-black border-y border-gray-900 overflow-hidden">
            <div class="flex whitespace-nowrap animate-marquee">
                <span class="text-6xl font-bold text-gray-800 mx-8 opacity-20">CREATIVE CODING</span>
                <span class="text-6xl font-bold text-gray-800 mx-8 opacity-20">ARTIFICIAL INTELLIGENCE</span>
                <span class="text-6xl font-bold text-gray-800 mx-8 opacity-20">WEBGL EXPERIENCES</span>
                <span class="text-6xl font-bold text-gray-800 mx-8 opacity-20">BRUTALIST DESIGN</span>
                <span class="text-6xl font-bold text-gray-800 mx-8 opacity-20">CREATIVE CODING</span>
                <span class="text-6xl font-bold text-gray-800 mx-8 opacity-20">ARTIFICIAL INTELLIGENCE</span>
            </div>
        </div>

        <!-- Neural Experiments Section -->
        <section id="neural" class="py-32 px-6 md:px-20 relative">
            <div class="max-w-3xl mx-auto">
                <div class="text-center mb-12">
                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-purple-900/20 border border-purple-500/30 text-purple-400 text-[10px] font-mono uppercase mb-6">
                        <span class="w-1.5 h-1.5 bg-purple-500 rounded-full animate-pulse"></span>
                        Gemini AI Experiment
                    </div>
                    <h2 class="text-4xl md:text-6xl font-bold mb-6">The Void Oracle</h2>
                    <p class="text-gray-400 text-lg">
                        An AI-powered creative generator. Feed it a concept, and it will hallucinate a complete project brief for you.
                    </p>
                </div>

                <div class="glass-panel p-8 md:p-12 rounded-sm relative overflow-hidden shadow-2xl shadow-purple-900/10">
                    <div class="flex flex-col md:flex-row gap-4 items-stretch mb-8">
                        <input type="text" id="oracle-input" 
                            placeholder="Type a concept (e.g., 'Digital Decay', 'Neon Jungle')" 
                            class="bg-black/50 border border-gray-700 text-white px-6 py-4 flex-grow focus:outline-none focus:border-white transition-colors font-mono text-sm hover-trigger placeholder-gray-600">
                        
                        <button id="manifest-btn" onclick="manifestConcept()" 
                            class="sparkle-btn bg-white text-black px-8 py-4 font-bold uppercase tracking-widest hover:bg-gray-200 transition-all hover-trigger magnetic-btn whitespace-nowrap">
                            Generate
                        </button>
                    </div>

                    <div id="oracle-status" class="text-xs font-mono text-center text-gray-500 mb-4 h-4"></div>

                    <div id="oracle-output" class="hidden opacity-0 transition-all duration-1000">
                        <div class="border-t border-gray-800 pt-8 mt-4">
                            <div class="flex justify-between items-start mb-4">
                                <h3 id="generated-title" class="text-3xl md:text-4xl font-bold text-white"></h3>
                                <span class="text-[10px] border border-gray-700 px-2 py-1 text-gray-500 uppercase">AI Generated</span>
                            </div>
                            <p id="generated-desc" class="text-gray-300 leading-relaxed mb-6 font-light text-lg"></p>
                            <div class="flex flex-wrap gap-2" id="generated-tags"></div>
                        </div>
                    </div>

                    <div id="oracle-loader" class="hidden absolute inset-0 bg-black/95 flex-col items-center justify-center z-20">
                        <div class="w-12 h-12 border-2 border-gray-800 border-t-purple-500 rounded-full animate-spin mb-4"></div>
                        <span class="text-xs font-mono text-purple-500 animate-pulse">HALLUCINATING CONCEPT...</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Vision Decoupler Section -->
        <section id="vision" class="py-32 px-6 md:px-20 bg-[#030303] border-t border-gray-900">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-16 items-center">
                <div>
                    <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-blue-900/20 border border-blue-500/30 text-blue-400 text-[10px] font-mono uppercase mb-6">
                        <span class="w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse"></span>
                        Computer Vision
                    </div>
                    <h2 class="text-4xl md:text-6xl font-bold mb-6">Vision Decoupler</h2>
                    <p class="text-gray-400 text-lg mb-8">
                        Upload an image. The AI will analyze its geometry and lighting, providing a critique through a brutalist design lens.
                    </p>
                    
                    <div id="drop-zone" class="drop-zone w-full aspect-video flex flex-col items-center justify-center cursor-pointer hover:bg-white/5 transition-colors relative overflow-hidden group rounded-sm border border-gray-800">
                        <input type="file" id="vision-upload" class="absolute inset-0 opacity-0 cursor-pointer z-20" accept="image/*">
                        <div id="vision-preview" class="absolute inset-0 bg-cover bg-center opacity-50 group-hover:opacity-30 transition-opacity z-0"></div>
                        
                        <div class="z-10 text-center pointer-events-none flex flex-col items-center p-4">
                            <svg class="w-8 h-8 text-gray-500 mb-4 group-hover:text-white transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                            <span class="text-xs font-mono tracking-widest text-gray-400 group-hover:text-white">CLICK TO UPLOAD IMAGE</span>
                        </div>

                        <div id="vision-loader" class="hidden absolute inset-0 bg-black/90 flex flex-col items-center justify-center z-30">
                             <div class="w-8 h-8 border border-gray-600 border-t-blue-500 rounded-full animate-spin mb-2"></div>
                             <span class="text-[10px] font-mono text-blue-500 animate-pulse">ANALYZING GEOMETRY...</span>
                        </div>
                    </div>
                </div>

                <div class="h-full flex flex-col justify-center">
                    <div class="glass-panel p-8 min-h-[300px] relative rounded-sm border-l-2 border-l-blue-500/50">
                        <h3 class="text-xs font-mono text-blue-400 mb-6 uppercase pb-2 flex justify-between">
                            <span>Analysis Protocol</span>
                            <span>v2.5.0</span>
                        </h3>
                        <p id="vision-output" class="text-gray-300 leading-relaxed font-light font-mono text-sm">
                            WAITING_FOR_INPUT... <span class="cursor-blink">_</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Neural Uplink Chat -->
        <section id="uplink" class="py-32 px-6 md:px-20 border-t border-gray-900 relative bg-gradient-to-b from-black to-[#050505]">
            <div class="max-w-4xl mx-auto">
                <div class="flex flex-col md:flex-row justify-between items-end mb-8">
                    <div>
                        <h2 class="text-4xl md:text-6xl font-bold">Neural Uplink</h2>
                        <p class="text-gray-500 mt-2">Chat with my digital clone.</p>
                    </div>
                    <div class="flex items-center space-x-2 text-green-500 text-xs font-mono mt-4 md:mt-0 bg-green-900/10 px-3 py-1 rounded-full border border-green-500/20">
                        <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                        <span>SYSTEM_ONLINE</span>
                    </div>
                </div>

                <div class="border border-gray-800 bg-black font-mono text-sm h-[500px] flex flex-col relative shadow-2xl shadow-green-900/5 rounded-md overflow-hidden">
                    <div class="bg-gray-900/80 p-3 flex justify-between items-center border-b border-gray-800 text-[10px] text-gray-500 uppercase tracking-widest">
                        <span>root@johndoe:~/uplink</span>
                        <span>Secure Shell</span>
                    </div>

                    <div id="chat-history" class="flex-1 overflow-y-auto p-6 space-y-6 scrollbar-hide">
                        <div class="chat-message ai">
                            <p class="text-green-400 mb-1 text-[10px]">SYSTEM</p>
                            <p>Connection established. I am the digital construct of John Doe. You can ask me about my tech stack, design philosophy, or availability.</p>
                        </div>
                    </div>

                    <div class="p-4 border-t border-gray-800 bg-gray-900/30 backdrop-blur-sm">
                        <div class="flex items-center space-x-3">
                            <span class="text-green-500">âžœ</span>
                            <input type="text" id="chat-input" 
                                class="bg-transparent border-none w-full focus:outline-none text-white placeholder-gray-700 font-mono"
                                placeholder="Enter command..." autocomplete="off">
                            <button id="chat-send" onclick="sendChatMessage()" class="text-xs border border-gray-700 px-4 py-2 hover:bg-white hover:text-black transition-colors uppercase rounded-sm">Send</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Skills Marquee (New) -->
        <div class="py-20 border-t border-gray-900">
            <div class="flex justify-center gap-8 flex-wrap max-w-4xl mx-auto px-6 grayscale opacity-50 hover:grayscale-0 hover:opacity-100 transition-all duration-500">
                <!-- Simple text badges for tech stack -->
                <span class="text-2xl font-bold text-white">THREE.JS</span>
                <span class="text-2xl font-bold text-gray-600">/</span>
                <span class="text-2xl font-bold text-white">REACT</span>
                <span class="text-2xl font-bold text-gray-600">/</span>
                <span class="text-2xl font-bold text-white">TYPESCRIPT</span>
                <span class="text-2xl font-bold text-gray-600">/</span>
                <span class="text-2xl font-bold text-white">NODE</span>
                <span class="text-2xl font-bold text-gray-600">/</span>
                <span class="text-2xl font-bold text-white">PYTHON</span>
                <span class="text-2xl font-bold text-gray-600">/</span>
                <span class="text-2xl font-bold text-white">WEBGL</span>
            </div>
        </div>

        <!-- Footer -->
        <footer id="contact" class="py-20 px-6 md:px-20 text-center relative border-t border-gray-900 bg-black">
            <h2 class="text-6xl md:text-9xl font-bold mb-12 hover-trigger tracking-tighter text-white">LET'S TALK</h2>
            <a href="mailto:hello@johndoe.com" class="inline-block text-xl md:text-2xl border-b border-white pb-1 hover:text-gray-400 hover:border-gray-400 transition-all hover-trigger">hello@johndoe.com</a>
            
            <div class="mt-20 flex flex-col md:flex-row justify-between items-center text-xs text-gray-600 font-mono uppercase">
                <p>&copy; 2025 John Doe. Digital Architect.</p>
                <div class="flex space-x-8 mt-6 md:mt-0">
                    <a href="#" class="hover:text-white transition-colors hover-trigger">X / Twitter</a>
                    <a href="#" class="hover:text-white transition-colors hover-trigger">LinkedIn</a>
                    <a href="#" class="hover:text-white transition-colors hover-trigger">GitHub</a>
                </div>
            </div>
        </footer>

    </main>

    <style>
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes scrolldown {
            0% { top: -100%; }
            100% { top: 100%; }
        }
        .animate-scrolldown {
            animation: scrolldown 2s cubic-bezier(0.77, 0, 0.175, 1) infinite;
        }
    </style>

    <script>
        const apiKey = ""; // Provided by environment

        // --- 1. UI Interactions ---
        
        // Loader
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loader').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loader').style.display = 'none';
                    // Trigger text reveal
                    const reveals = document.querySelectorAll('.reveal-text');
                    reveals.forEach(el => {
                        el.style.transition = 'transform 1s cubic-bezier(0.77, 0, 0.175, 1)';
                        el.style.transform = 'translateY(0)';
                    });
                }, 800);
            }, 1000);
        });

        // Custom Cursor
        const cursor = document.getElementById('cursor');
        const triggers = document.querySelectorAll('.hover-trigger');

        document.addEventListener('mousemove', (e) => {
            cursor.style.left = e.clientX + 'px';
            cursor.style.top = e.clientY + 'px';
        });

        triggers.forEach(trigger => {
            trigger.addEventListener('mouseenter', () => cursor.classList.add('hovered'));
            trigger.addEventListener('mouseleave', () => cursor.classList.remove('hovered'));
        });

        // Magnetic Buttons
        const magneticBtns = document.querySelectorAll('.magnetic-btn');
        magneticBtns.forEach(btn => {
            btn.addEventListener('mousemove', (e) => {
                const rect = btn.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                btn.style.transform = `translate(${x * 0.2}px, ${y * 0.2}px)`;
            });
            btn.addEventListener('mouseleave', () => {
                btn.style.transform = 'translate(0px, 0px)';
            });
        });

        // --- 2. Gemini API Integration (The Void Oracle) ---
        async function manifestConcept() {
            const inputEl = document.getElementById('oracle-input');
            const statusEl = document.getElementById('oracle-status');
            const loaderEl = document.getElementById('oracle-loader');
            const outputContainer = document.getElementById('oracle-output');
            
            const seed = inputEl.value.trim();
            
            if (!seed) {
                statusEl.textContent = "Error: Input required.";
                statusEl.style.color = "#ff4444";
                return;
            }

            // UI Reset
            statusEl.textContent = "";
            outputContainer.classList.add('hidden');
            outputContainer.classList.remove('opacity-100');
            loaderEl.classList.remove('hidden');
            loaderEl.classList.add('flex');

            const systemPrompt = "You are a high-end Creative Director. Generate a fictional, avant-garde project concept based on the user's keyword. Return ONLY a JSON object with these keys: 'title' (short, cool name), 'description' (2 sentences, abstract but descriptive), 'stack' (array of 3 technologies). No markdown.";
            
            const userQuery = `Concept keyword: ${seed}`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: userQuery }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] },
                        generationConfig: { responseMimeType: "application/json" }
                    })
                });

                if (!response.ok) throw new Error('API Error');

                const data = await response.json();
                const resultText = data.candidates[0].content.parts[0].text;
                const project = JSON.parse(resultText);

                // Render Result
                document.getElementById('generated-title').textContent = project.title;
                document.getElementById('generated-desc').textContent = project.description;
                
                const tagsContainer = document.getElementById('generated-tags');
                tagsContainer.innerHTML = '';
                project.stack.forEach(tech => {
                    const span = document.createElement('span');
                    span.className = "text-[10px] font-mono border border-gray-700 px-2 py-1 text-gray-400 uppercase tracking-widest";
                    span.textContent = tech;
                    tagsContainer.appendChild(span);
                });

                loaderEl.classList.add('hidden');
                loaderEl.classList.remove('flex');
                outputContainer.classList.remove('hidden');
                setTimeout(() => { outputContainer.classList.add('opacity-100'); }, 50);

            } catch (error) {
                console.error(error);
                loaderEl.classList.add('hidden');
                loaderEl.classList.remove('flex');
                statusEl.textContent = "Connection Error.";
                statusEl.style.color = "#ff4444";
            }
        }

        document.getElementById('oracle-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') manifestConcept();
        });

        // --- 3. Vision Decoupler ---
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('vision-upload');
        const visionOutput = document.getElementById('vision-output');
        const visionLoader = document.getElementById('vision-loader');
        const visionPreview = document.getElementById('vision-preview');

        dropZone.addEventListener('dragover', (e) => { e.preventDefault(); dropZone.classList.add('dragover'); });
        dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('dragover');
            if (e.dataTransfer.files.length) handleImageUpload(e.dataTransfer.files[0]);
        });
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length) handleImageUpload(e.target.files[0]);
        });

        function handleImageUpload(file) {
            if (!file.type.startsWith('image/')) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                const base64Data = e.target.result.split(',')[1];
                visionPreview.style.backgroundImage = `url(${e.target.result})`;
                analyzeImage(base64Data);
            };
            reader.readAsDataURL(file);
        }

        async function analyzeImage(base64Image) {
            visionLoader.classList.remove('hidden');
            visionLoader.classList.add('flex');
            visionOutput.innerHTML = 'ANALYZING_DATA_STREAM...';

            const prompt = "Analyze this image as an avant-garde art critic. Focus on composition and light. Be concise (max 2 sentences).";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [
                                { text: prompt },
                                { inlineData: { mimeType: "image/png", data: base64Image } }
                            ]
                        }]
                    })
                });

                if (!response.ok) throw new Error('Vision API Error');
                const data = await response.json();
                const analysis = data.candidates[0].content.parts[0].text;
                
                visionLoader.classList.add('hidden');
                visionLoader.classList.remove('flex');
                typeWriter(analysis, visionOutput);

            } catch (error) {
                visionLoader.classList.add('hidden');
                visionLoader.classList.remove('flex');
                visionOutput.textContent = "ERROR: SIGNAL_LOST.";
            }
        }

        function typeWriter(text, element) {
            element.innerHTML = '';
            let i = 0;
            const speed = 20;
            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                } else {
                    element.innerHTML += ' <span class="cursor-blink">_</span>';
                }
            }
            type();
        }

        // --- 4. Neural Uplink (Chat) ---
        const chatHistoryEl = document.getElementById('chat-history');
        const chatInput = document.getElementById('chat-input');
        
        async function sendChatMessage() {
            const message = chatInput.value.trim();
            if (!message) return;

            appendMessage('user', message);
            chatInput.value = '';
            
            appendMessage('ai', 'THINKING...');
            const loadingMsg = chatHistoryEl.lastElementChild;

            const systemPrompt = "You are John Doe's digital assistant. You are helpful, professional, but concise. You know about WebGL, Three.js, and AI.";

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: message }] }],
                        systemInstruction: { parts: [{ text: systemPrompt }] }
                    })
                });

                if (!response.ok) throw new Error('Chat API Error');
                const data = await response.json();
                const reply = data.candidates[0].content.parts[0].text;

                loadingMsg.remove();
                appendMessage('ai', reply);

            } catch (error) {
                loadingMsg.remove();
                appendMessage('ai', 'ERROR: LINK_FAILED.');
            }
        }

        function appendMessage(role, text) {
            const div = document.createElement('div');
            div.className = `chat-message ${role} mb-4`;
            
            if (role === 'ai') {
                div.innerHTML = `<p class="text-green-400 mb-1 text-[10px]">SYSTEM</p><p>${text}</p>`;
            } else {
                div.innerHTML = `<p class="text-gray-500 mb-1 text-[10px]">USER</p><p>${text}</p>`;
            }
            
            chatHistoryEl.appendChild(div);
            chatHistoryEl.scrollTop = chatHistoryEl.scrollHeight;
        }
        
        chatInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') sendChatMessage(); });


        // --- 5. Refined Three.js Animation ---
        const initThree = () => {
            const container = document.getElementById('canvas-container');
            const scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x050505, 0.001); // Slight fog for depth

            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 25;

            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);

            // 1. Inner Core (Solid Icosahedron)
            const coreGeo = new THREE.IcosahedronGeometry(8, 1);
            const coreMat = new THREE.MeshBasicMaterial({ color: 0x111111, wireframe: true, transparent: true, opacity: 0.1 });
            const core = new THREE.Mesh(coreGeo, coreMat);
            scene.add(core);

            // 2. Outer Shell (Wireframe)
            const geometry = new THREE.IcosahedronGeometry(12, 2);
            const wireframeMaterial = new THREE.LineBasicMaterial({ color: 0x555555, transparent: true, opacity: 0.15 });
            const wireframe = new THREE.LineSegments(new THREE.WireframeGeometry(geometry), wireframeMaterial);
            scene.add(wireframe);

            // 3. Particle Field (RESTORED STAR FIELD)
            const particlesGeometry = new THREE.BufferGeometry();
            const particlesCount = 2000; // More particles for a dense field
            const posArray = new Float32Array(particlesCount * 3);
            for(let i = 0; i < particlesCount * 3; i++) {
                // Wider spread
                posArray[i] = (Math.random() - 0.5) * 200; 
            }
            particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
            
            // Larger and brighter particles
            const particlesMaterial = new THREE.PointsMaterial({ 
                size: 0.15, // Visible size
                color: 0xffffff, 
                transparent: true, 
                opacity: 0.9 // High opacity
            });
            const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
            scene.add(particlesMesh);

            // Interaction
            let mouseX = 0, mouseY = 0;
            let targetX = 0, targetY = 0;
            const windowHalfX = window.innerWidth / 2;
            const windowHalfY = window.innerHeight / 2;

            document.addEventListener('mousemove', (event) => {
                mouseX = (event.clientX - windowHalfX);
                mouseY = (event.clientY - windowHalfY);
            });

            const clock = new THREE.Clock();

            const animate = () => {
                const elapsedTime = clock.getElapsedTime();
                
                targetX = mouseX * 0.0005;
                targetY = mouseY * 0.0005;

                // Smoother camera Lerp
                camera.position.x += (mouseX * 0.005 - camera.position.x) * 0.03;
                camera.position.y += (-mouseY * 0.005 - camera.position.y) * 0.03;
                camera.lookAt(scene.position);

                // Gentle rotations
                core.rotation.y += 0.001;
                core.rotation.z -= 0.0005;
                
                wireframe.rotation.y -= 0.0015;
                wireframe.rotation.x += 0.0005;

                // Breathing Effect
                const breathe = 1 + Math.sin(elapsedTime * 0.5) * 0.02;
                wireframe.scale.set(breathe, breathe, breathe);

                // Rotate star field slowly
                particlesMesh.rotation.y = elapsedTime * 0.02;
                particlesMesh.rotation.x = mouseY * 0.00005;

                renderer.render(scene, camera);
                requestAnimationFrame(animate);
            };

            animate();

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        };

        initThree();
    </script>
</body>
</html>